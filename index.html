<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css"
    />
    <link rel="stylesheet" href="/assets/css/style.css" />
  </head>
  <body>
    <!-- header -->
    <header>
      <!-- Nav  -->
      <div class="nav container">
        <a href="#" class="logo">Ecommerce</a>
        <!-- Cart Icon -->
        <i class="bx bx-shopping-bag" id="cart-icon"></i>
        <!-- cart -->
        <div class="cart">
          <h2 class="cart-title">Your Cart</h2>
          <!-- Content -->
          <div class="cart-content">
            <div class="cart-box">
              <img src="/assets/images/2.jpg" alt="" class="cart-img" />
              <div class="detail-box">
                <div class="cart-product-title">Earbuds</div>
                <div class="cart-price" value="25">$25</div>
                <input type="number" value="1" class="cart-quantity" />
              </div>
              <!-- Remove Cart -->
              <i class="bx bxs-trash-alt cart-remove"></i>
            </div>
          </div>
          <!-- Total -->
          <div class="total">
            <div class="total-title">Total</div>
            <div class="total-price">$0</div>
          </div>
          <!-- Buy Button -->
          <button type="button" class="btn-buy">Buy Now</button>
          <!-- Cart Close -->
          <i class="bx bx-x" id="close-cart"></i>
        </div>
      </div>
    </header>

    <!-- Shop -->
    <section class="shop container">
      <h2 class="section-title">Shop Products</h2>
      <!-- Contents -->
      <div class="shop-content">
        <!-- Box 1 -->
        <div class="product-box">
          <img src="/assets/images/2.jpg" alt="" class="product-img" />
          <h2 class="product-title">Suwait Hoddy</h2>
          <span class="price">$25</span>
          <i class="bx bx-shopping-bag add-cart"></i>
        </div>
        <!-- Box 2 -->
        <div class="product-box">
          <img src="/assets/images/5.jpg" alt="" class="product-img" />
          <h2 class="product-title">LeopardSkin Shoe</h2>
          <span class="price">$15</span>
          <i class="bx bx-shopping-bag add-cart"></i>
        </div>
        <!-- Box 3 -->
        <div class="product-box">
          <img src="/assets/images/6.jpg" alt="" class="product-img" />
          <h2 class="product-title">Laser Blender</h2>
          <span class="price">$29</span>
          <i class="bx bx-shopping-bag add-cart"></i>
        </div>
        <!-- Box 4 -->
        <div class="product-box">
          <img src="/assets/images/7.jpg" alt="" class="product-img" />
          <h2 class="product-title">Oraimo Earpods</h2>
          <span class="price">$95</span>
          <i class="bx bx-shopping-bag add-cart"></i>
        </div>
        <!-- Box 5 -->
        <div class="product-box">
          <img src="/assets/images/8.jpg" alt="" class="product-img" />
          <h2 class="product-title">Black Shirt</h2>
          <span class="price">$25</span>
          <i class="bx bx-shopping-bag add-cart"></i>
        </div>
        <!-- Box 6 -->
        <div class="product-box">
          <img src="/assets/images/9.jpeg" alt="" class="product-img" />
          <h2 class="product-title">Supreme Polo</h2>
          <span class="price">$25</span>
          <i class="bx bx-shopping-bag add-cart"></i>
        </div>
        <!-- Box 7 -->
        <div class="product-box">
          <img src="/assets/images/23.jpg" alt="" class="product-img" />
          <h2 class="product-title">JBL</h2>
          <span class="price">$115</span>
          <i class="bx bx-shopping-bag add-cart"></i>
        </div>
        <!-- Box 8 -->
        <div class="product-box">
          <img src="/assets/images/11.jpeg" alt="" class="product-img" />
          <h2 class="product-title">Dawnson Cap</h2>
          <span class="price">$13</span>
          <i class="bx bx-shopping-bag add-cart"></i>
        </div>
      </div>
    </section>

    <script>
      // Cart
      let cartIcon = document.querySelector("#cart-icon");
      let cart = document.querySelector(".cart");
      let closeCart = document.querySelector("#close-cart");

      cartIcon.onclick = () => {
        cart.classList.add("active");
      };

      closeCart.onclick = () => {
        cart.classList.remove("active");
      };

      // cart Working JS
      if (document.readyState == "loading") {
        document.addEventListener("DOMContentLoaded", ready);
      } else {
        ready();
      }

      //Making Funtion
      function ready() {
        // Remove Items From Cart
        var removeCartButtons = document.getElementsByClassName("cart-remove");
        console.log(removeCartButtons);
        for (var i = 0; i < removeCartButtons.length; i++) {
          var button = removeCartButtons[i];
          button.addEventListener("click", removeCartItem);
        }

        // Quantity Changes
        var quantityInputs = document.getElementsByClassName("cart-quantity");
        for (var i = 0; i < quantityInputs.length; i++) {
          var input = quantityInputs[i];
          input.addEventListener("change", quantityChanged);
        }
      }

      // Remove Items From Cart
      function removeCartItem(event) {
        var buttonClicked = event.target;
        buttonClicked.parentElement.remove();
        updatetotal();
      }

      // Quantity Changes
      function quantityChanged(e) {
        var input = e.target;
        if (isNaN(input.value) || input.value <= 0) {
          input.value = 1;
        }
        updatetotal();
      }

      //Update Total
      function updatetotal() {
        var cartContent = document.getElementsByClassName("cart-content")[0];
        var cartBoxes = document.getElementsByClassName("cart-box");
        var total = 0;
        for (var i = 0; i < cartBoxes.length.length; i++) {
          var cartBox = cartBoxes[i];
          var priceElement =
            document.getElementsByClassName("cart-price")[0].value;
          var quantityElement =
            document.getElementsByClassName("cart-quantity")[0].value;
          // var price = parseFloat(priceElement.innerText.replace("$", ""));
          // var quantity = quantityElement.value;
          total = total + price * quantity;
          document.getElementsByClassName("total-price")[0].innerText =
            "$" + total;
          console.log(total);
        }
      }
    </script>

    <script src="/assets/js/main.js"></script>
  </body>
</html>
